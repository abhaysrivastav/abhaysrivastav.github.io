# API Design - Complete Summary & Quick Revision Guide ğŸ“š

## Table of Contents
1. [API Types Overview](#api-types-overview)
2. [REST API Design](#rest-api-design)
3. [GraphQL](#graphql)
4. [RPC (gRPC)](#rpc-grpc)
5. [Common API Patterns](#common-api-patterns)
6. [Security](#security)
7. [Decision Trees](#decision-trees)

---

## API Types Overview

### The Big Picture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API Protocol Selection                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  REST                 GraphQL               RPC         â”‚
â”‚  (90% use cases)      (Flexible data)       (Fast)     â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Resources â”‚        â”‚  Query   â”‚        â”‚Functions â”‚ â”‚
â”‚  â”‚(Nouns)   â”‚        â”‚ Language â”‚        â”‚(Verbs)   â”‚ â”‚
â”‚  â”‚          â”‚        â”‚          â”‚        â”‚          â”‚ â”‚
â”‚  â”‚GET/POST  â”‚        â”‚Single    â”‚        â”‚Direct    â”‚ â”‚
â”‚  â”‚PUT/DELETEâ”‚        â”‚Endpoint  â”‚        â”‚Calls     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  Web/Mobile          Multiple Clients    Microservices â”‚
â”‚  Standard CRUD       Different Needs     High Perf     â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### When to Use What?

```
Start Here
    â”‚
    â–¼
Need API?
    â”‚
    â”œâ”€> Public facing (web/mobile)? â”€â”€> REST âœ…
    â”‚
    â”œâ”€> Different clients need different data? â”€â”€> GraphQL
    â”‚
    â””â”€> Internal services + High performance? â”€â”€> gRPC
```

---

## REST API Design

### Core Concept: Resources (Not Actions!)

```
âŒ Wrong (Actions):
/bookTicket
/cancelBooking
/getUserDetails

âœ… Right (Resources):
POST   /bookings        (Create booking)
DELETE /bookings/123    (Cancel booking)
GET    /users/456       (Get user)
```

### HTTP Methods Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Method  â”‚   Purpose       â”‚  Idempotent  â”‚  Safe       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  GET     â”‚ Retrieve data   â”‚     âœ…       â”‚    âœ…       â”‚
â”‚  POST    â”‚ Create new      â”‚     âŒ       â”‚    âŒ       â”‚
â”‚  PUT     â”‚ Replace entire  â”‚     âœ…       â”‚    âŒ       â”‚
â”‚  PATCH   â”‚ Update partial  â”‚     âœ…       â”‚    âŒ       â”‚
â”‚  DELETE  â”‚ Remove resource â”‚     âœ…       â”‚    âŒ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Idempotent = Same result if called multiple times
Safe = Doesn't change data
```

### Resource Modeling Example (Ticketmaster)

```
Core Entities â†’ REST Resources

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                     â”‚
â”‚  Events          Venues         Bookings            â”‚
â”‚    â”‚               â”‚               â”‚                â”‚
â”‚    â–¼               â–¼               â–¼                â”‚
â”‚  /events        /venues        /bookings            â”‚
â”‚    â”‚               â”‚               â”‚                â”‚
â”‚    â”œâ”€ GET         â”œâ”€ GET          â”œâ”€ GET            â”‚
â”‚    â”œâ”€ POST        â”œâ”€ POST         â”œâ”€ POST           â”‚
â”‚    â””â”€ DELETE      â””â”€ DELETE       â””â”€ DELETE         â”‚
â”‚                                                     â”‚
â”‚  Nested Resources (Parent-Child):                  â”‚
â”‚                                                     â”‚
â”‚  /events/123/tickets    (Event 123 à¤•à¥‡ tickets)     â”‚
â”‚  /users/456/bookings    (User 456 à¤•à¥€ bookings)     â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Passing Data - Three Ways

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Where to Put What Data?                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  1. Path Parameters (Required - Identity)         â”‚
â”‚     /events/123/bookings                          â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                                  â”‚
â”‚         Event ID                                  â”‚
â”‚                                                    â”‚
â”‚  2. Query Parameters (Optional - Filters)         â”‚
â”‚     /events?city=Mumbai&date=2024-01-01           â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                   Filters                         â”‚
â”‚                                                    â”‚
â”‚  3. Request Body (Data Payload)                   â”‚
â”‚     POST /bookings                                â”‚
â”‚     { "tickets": [...], "payment": "upi" }        â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚              Actual Data                          â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### REST Request/Response Flow

```
Client                                Server
  â”‚                                     â”‚
  â”‚  GET /events/123                   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
  â”‚                                     â”‚
  â”‚                                [Process]
  â”‚                                     â”‚
  â”‚  200 OK                            â”‚
  â”‚  {                                 â”‚
  â”‚    "id": "123",                    â”‚
  â”‚    "name": "Coldplay Concert"      â”‚
  â”‚  }                                 â”‚
  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚                                     â”‚

Status Codes:
â”œâ”€ 2xx: Success (200 OK, 201 Created)
â”œâ”€ 4xx: Client Error (400 Bad Request, 404 Not Found)
â””â”€ 5xx: Server Error (500 Internal Server Error)
```

---

## GraphQL

### Core Concept: Query Exactly What You Need

```
Problem GraphQL Solves:

REST Approach:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mobile App needs:                   â”‚
â”‚  - Event name                        â”‚
â”‚  - Event date                        â”‚
â”‚                                      â”‚
â”‚  GET /events/123 returns:            â”‚
â”‚  - name âœ…                           â”‚
â”‚  - date âœ…                           â”‚
â”‚  - description (not needed)          â”‚
â”‚  - venue (full object, not needed)   â”‚
â”‚  - tickets (100 items, not needed)   â”‚
â”‚  - sponsors (not needed)             â”‚
â”‚                                      â”‚
â”‚  Over-fetching! Waste of bandwidth!  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GraphQL Solution:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Query (Mobile specifies):           â”‚
â”‚  {                                   â”‚
â”‚    event(id: "123") {                â”‚
â”‚      name                            â”‚
â”‚      date                            â”‚
â”‚    }                                 â”‚
â”‚  }                                   â”‚
â”‚                                      â”‚
â”‚  Response (Only what was asked):     â”‚
â”‚  {                                   â”‚
â”‚    "event": {                        â”‚
â”‚      "name": "Coldplay",             â”‚
â”‚      "date": "2024-12-25"            â”‚
â”‚    }                                 â”‚
â”‚  }                                   â”‚
â”‚                                      â”‚
â”‚  Exact data! No waste! âœ…            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### GraphQL Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Single Endpoint Architecture           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  Mobile App          Web Dashboard             â”‚
â”‚      â”‚                    â”‚                    â”‚
â”‚      â”‚  Query:            â”‚  Query:            â”‚
â”‚      â”‚  {name, date}      â”‚  {name, date,      â”‚
â”‚      â”‚                    â”‚   venue, tickets}  â”‚
â”‚      â”‚                    â”‚                    â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚               â”‚                                â”‚
â”‚               â–¼                                â”‚
â”‚      POST /graphql                             â”‚
â”‚               â”‚                                â”‚
â”‚               â–¼                                â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚      â”‚   GraphQL    â”‚                          â”‚
â”‚      â”‚   Server     â”‚                          â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚             â”‚                                  â”‚
â”‚             â”œâ”€> Resolver 1 (fetch event)       â”‚
â”‚             â”œâ”€> Resolver 2 (fetch venue)       â”‚
â”‚             â””â”€> Resolver 3 (fetch tickets)     â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### When to Use GraphQL

```
âœ… Use GraphQL When:
â”œâ”€ Multiple clients (mobile, web, tablet) with different needs
â”œâ”€ Over-fetching/under-fetching is a problem
â”œâ”€ Frontend teams want independence from backend
â””â”€ Flexible data requirements

âŒ Avoid GraphQL When:
â”œâ”€ Simple CRUD operations
â”œâ”€ Single client type
â”œâ”€ Team not familiar with GraphQL
â””â”€ Caching important (GraphQL caching is hard)
```

---

## RPC (gRPC)

### Core Concept: Function Calls Across Network

```
Thinking Difference:

REST (Resource-oriented):
"I want the booking RESOURCE"
GET /bookings/123

RPC (Action-oriented):
"I want to CALL getBooking function"
getBooking(id: "123")
```

### gRPC Communication Flow

```
Service A (Java)                    Service B (Go)
     â”‚                                   â”‚
     â”‚ Function Call:                   â”‚
     â”‚ getEvent(id: "123")              â”‚
     â”‚                                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                   â”‚
     â”‚  [Binary Data via HTTP/2]         â”‚
     â”‚  Size: 30 bytes                   â”‚
     â”‚  (vs JSON: 120 bytes)             â”‚
     â”‚                                   â”‚
     â”‚                              [Execute]
     â”‚                              getEvent()
     â”‚                                   â”‚
     â”‚ Return Event object               â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                   â”‚
     â”‚  [Binary Response]                â”‚
     â”‚  Time: 10ms                       â”‚
     â”‚  (vs REST: 50ms)                  â”‚
     â”‚                                   â”‚
```

### Protocol Buffers (protobuf)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Why Protobuf? Size & Speed                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                   â”‚
â”‚  JSON (Text):                                     â”‚
â”‚  {                                                â”‚
â”‚    "id": "user_123",                              â”‚
â”‚    "name": "Abhay",                               â”‚
â”‚    "age": 25                                      â”‚
â”‚  }                                                â”‚
â”‚  Size: 80 bytes                                   â”‚
â”‚  Parsing: 50ms                                    â”‚
â”‚                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                   â”‚
â”‚  Protobuf (Binary):                               â”‚
â”‚  0x0a 0x08 0x75 0x73 0x65...                      â”‚
â”‚                                                   â”‚
â”‚  Size: 25 bytes (69% smaller!) âœ…                 â”‚
â”‚  Parsing: 5ms (10x faster!) âœ…                    â”‚
â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Protobuf Schema Definition

```
Schema (.proto file) = Contract between services

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Define Once, Use Everywhere            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  ticketmaster.proto                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ message Event {    â”‚                 â”‚
â”‚  â”‚   string id = 1;   â”‚                 â”‚
â”‚  â”‚   string name = 2; â”‚                 â”‚
â”‚  â”‚   int64 date = 3;  â”‚                 â”‚
â”‚  â”‚ }                  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚           â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Auto-generate  â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚           â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚                          â”‚           â”‚
â”‚  â–¼           â–¼         â–¼    â–¼           â”‚
â”‚ Java       Go      Python  Node         â”‚
â”‚ code      code      code   code         â”‚
â”‚                                         â”‚
â”‚ All services use SAME schema!           â”‚
â”‚ Type-safe across languages! âœ…          â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Microservices Architecture with gRPC

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Ticketmaster Microservices                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  External                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚ Mobile  â”‚  REST/JSON                        â”‚
â”‚  â”‚   App   â”‚  (Human-readable)                 â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                   â”‚
â”‚       â”‚                                        â”‚
â”‚       â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚   API    â”‚                                  â”‚
â”‚  â”‚ Gateway  â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚       â”‚                                        â”‚
â”‚       â”‚ gRPC/Protobuf (Fast & Type-safe)       â”‚
â”‚       â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚                                 â”‚           â”‚
â”‚  â–¼          â–¼         â–¼           â–¼            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚Book â”‚  â”‚Event â”‚  â”‚Pay   â”‚  â”‚User  â”‚         â”‚
â”‚ â”‚(Java)  â”‚(Go)  â”‚  â”‚(Py)  â”‚  â”‚(Node)â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                â”‚
â”‚ Why this split?                                â”‚
â”‚ External: REST (compatibility, debugging)      â”‚
â”‚ Internal: gRPC (speed, type-safety)            â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### gRPC Benefits Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        gRPC Advantages                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚ Performance:                           â”‚
â”‚ â”œâ”€ 60-70% smaller payload             â”‚
â”‚ â”œâ”€ 3-5x faster than REST              â”‚
â”‚ â””â”€ HTTP/2 (multiplexing)               â”‚
â”‚                                        â”‚
â”‚ Type Safety:                           â”‚
â”‚ â”œâ”€ Compile-time errors                â”‚
â”‚ â”œâ”€ No runtime surprises               â”‚
â”‚ â””â”€ .proto = single source of truth    â”‚
â”‚                                        â”‚
â”‚ Multi-language:                        â”‚
â”‚ â”œâ”€ Java, Go, Python, Node, etc.       â”‚
â”‚ â”œâ”€ Auto-generated code                â”‚
â”‚ â””â”€ Consistent across services          â”‚
â”‚                                        â”‚
â”‚ Evolution:                             â”‚
â”‚ â”œâ”€ Add fields without breaking        â”‚
â”‚ â””â”€ Backward compatible                 â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Common API Patterns

### 1. Pagination

#### Problem Statement

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Why Pagination Needed?             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  Without Pagination:                     â”‚
â”‚  GET /events â†’ 1 million events          â”‚
â”‚                                          â”‚
â”‚  Problems:                               â”‚
â”‚  â”œâ”€ Response size: 500 MB               â”‚
â”‚  â”œâ”€ Loading time: 2-3 minutes           â”‚
â”‚  â”œâ”€ Mobile data exhausted               â”‚
â”‚  â””â”€ App crash! ğŸ’¥                       â”‚
â”‚                                          â”‚
â”‚  With Pagination:                        â”‚
â”‚  GET /events?limit=20                    â”‚
â”‚                                          â”‚
â”‚  Benefits:                               â”‚
â”‚  â”œâ”€ Response size: 50 KB âœ…             â”‚
â”‚  â”œâ”€ Loading time: 0.5 seconds âœ…        â”‚
â”‚  â”œâ”€ Smooth experience âœ…                â”‚
â”‚  â””â”€ Load more as needed âœ…              â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### A) Offset-based Pagination

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Offset-based (Simple)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  How it works:                              â”‚
â”‚                                             â”‚
â”‚  Database: [1,2,3,4,5,6,7,8,9,10...]       â”‚
â”‚             â””â”€â”¬â”€â”˜ â””â”€â”¬â”€â”˜ â””â”€â”¬â”€â”˜              â”‚
â”‚            Page 1  Page 2 Page 3            â”‚
â”‚                                             â”‚
â”‚  GET /events?offset=0&limit=20              â”‚
â”‚  â””â”€> Records 1-20                           â”‚
â”‚                                             â”‚
â”‚  GET /events?offset=20&limit=20             â”‚
â”‚  â””â”€> Records 21-40                          â”‚
â”‚                                             â”‚
â”‚  GET /events?offset=40&limit=20             â”‚
â”‚  â””â”€> Records 41-60                          â”‚
â”‚                                             â”‚
â”‚  âœ… Pros:                                   â”‚
â”‚  â”œâ”€ Simple to implement                     â”‚
â”‚  â”œâ”€ Jump to any page ("Go to page 5")      â”‚
â”‚  â”œâ”€ Total count available                  â”‚
â”‚  â””â”€ Familiar UX (Google search style)      â”‚
â”‚                                             â”‚
â”‚  âŒ Cons:                                   â”‚
â”‚  â”œâ”€ Inconsistent if data changes           â”‚
â”‚  â”œâ”€ Performance issues (large offsets)     â”‚
â”‚  â””â”€ Duplicates/missing records possible    â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Offset Problem Visualization:**

```
Time T1: User on Page 1
Database: [A, B, C, D, E, F, G, H, I, J...]
Page 1:   [A, B, C, D, E]

Time T2: 3 new items added at top
Database: [X, Y, Z, A, B, C, D, E, F, G, H, I, J...]

Time T3: User clicks Page 2 (offset=5)
Expected: [F, G, H, I, J]
Got:      [C, D, E, F, G]  âŒ Already saw C, D, E!

Problem: Duplicates!
```

#### B) Cursor-based Pagination

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Cursor-based (Consistent)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  How it works:                              â”‚
â”‚                                             â”‚
â”‚  GET /events?limit=20                       â”‚
â”‚  Response: {                                â”‚
â”‚    data: [event1, event2, ..., event20],   â”‚
â”‚    next_cursor: "abc123"                    â”‚
â”‚  }                                          â”‚
â”‚                                             â”‚
â”‚  GET /events?cursor=abc123&limit=20         â”‚
â”‚  â””â”€> Next 20 after cursor                   â”‚
â”‚                                             â”‚
â”‚  Cursor = Pointer to last seen record       â”‚
â”‚  (encoded: created_at + id)                 â”‚
â”‚                                             â”‚
â”‚  âœ… Pros:                                   â”‚
â”‚  â”œâ”€ Always consistent                       â”‚
â”‚  â”œâ”€ No duplicates/missing records           â”‚
â”‚  â”œâ”€ Fast (uses indexes)                     â”‚
â”‚  â””â”€ Perfect for real-time data              â”‚
â”‚                                             â”‚
â”‚  âŒ Cons:                                   â”‚
â”‚  â”œâ”€ Can't jump to specific page            â”‚
â”‚  â”œâ”€ No total count                          â”‚
â”‚  â”œâ”€ Complex to implement                    â”‚
â”‚  â””â”€ Hard to bookmark                        â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Cursor Consistency:**

```
Time T1: User gets cursor
Database: [A, B, C, D, E, F, G...]
Cursor points to E

Time T2: 100 new items added
Database: [X1, X2, ..., X100, A, B, C, D, E, F, G...]

Time T3: User uses cursor
Query: "Give me records after E"
Result: [F, G, H, I, J...]  âœ… Correct!

Cursor maintains position regardless of new data!
```

#### Pagination Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Feature      â”‚   Offset     â”‚    Cursor     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Implementation â”‚   Simple     â”‚   Complex     â”‚
â”‚ Jump to page   â”‚     âœ…       â”‚      âŒ       â”‚
â”‚ Total count    â”‚     âœ…       â”‚      âŒ       â”‚
â”‚ Consistency    â”‚     âŒ       â”‚      âœ…       â”‚
â”‚ Performance    â”‚   Slow*      â”‚     Fast      â”‚
â”‚ Real-time data â”‚     âŒ       â”‚      âœ…       â”‚
â”‚ Use case       â”‚   Search     â”‚     Feeds     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

*Slow for large offsets (OFFSET 1000000)
```

#### When to Use What?

```
Use Offset-based:
â”œâ”€ Search results (Google, Amazon)
â”œâ”€ Admin dashboards
â”œâ”€ Historical/static data
â”œâ”€ Need page numbers
â””â”€ Total count important

Use Cursor-based:
â”œâ”€ Social media feeds (Twitter, Instagram)
â”œâ”€ Real-time notifications
â”œâ”€ Chat messages
â”œâ”€ Activity logs
â””â”€ Large datasets (millions of records)
```

---

### 2. Versioning

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Why API Versioning?                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  Problem:                                   â”‚
â”‚  â”œâ”€ 1M users on mobile app v1.0            â”‚
â”‚  â”œâ”€ API returns: {"name": "Event"}         â”‚
â”‚  â”œâ”€ You want to change to {"title": ...}   â”‚
â”‚  â””â”€ Old apps will break! ğŸ’¥                â”‚
â”‚                                             â”‚
â”‚  Solution: Version your API                 â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Old     â”‚        â”‚   New    â”‚          â”‚
â”‚  â”‚  Clients â”‚        â”‚  Clients â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚
â”‚       â”‚                   â”‚                 â”‚
â”‚       â–¼                   â–¼                 â”‚
â”‚  GET /v1/events    GET /v2/events           â”‚
â”‚       â”‚                   â”‚                 â”‚
â”‚       â–¼                   â–¼                 â”‚
â”‚  {"name": ...}    {"title": ...}            â”‚
â”‚                                             â”‚
â”‚  Both work! No breaking changes! âœ…         â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Versioning Strategy:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       URL Versioning (Recommended)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  /v1/events  (Old API)                 â”‚
â”‚  /v2/events  (New API)                 â”‚
â”‚                                        â”‚
â”‚  âœ… Clear and explicit                 â”‚
â”‚  âœ… Easy to test                       â”‚
â”‚  âœ… Simple routing                     â”‚
â”‚                                        â”‚
â”‚  Deprecation Timeline:                 â”‚
â”‚  â”œâ”€ Launch v2                          â”‚
â”‚  â”œâ”€ Support both v1 & v2 (6 months)    â”‚
â”‚  â”œâ”€ Warn v1 users (3 months)           â”‚
â”‚  â””â”€ Sunset v1                          â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security

### The Security Triangle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         API Security Layers             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚           1. Authentication             â”‚
â”‚           (Who are you?)                â”‚
â”‚                  â”‚                      â”‚
â”‚                  â”‚                      â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚        â”‚                   â”‚            â”‚
â”‚        â–¼                   â–¼            â”‚
â”‚  2. Authorization    3. Rate Limiting   â”‚
â”‚  (What can you do?)  (How much?)        â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. Authentication (Identity Verification)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Authentication Flow                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                               â”‚
â”‚  Step 1: Login                                â”‚
â”‚  User â†’ [Email + Password] â†’ Server           â”‚
â”‚                                               â”‚
â”‚  Step 2: Verify                               â”‚
â”‚  Server checks credentials                    â”‚
â”‚                                               â”‚
â”‚  Step 3: Token                                â”‚
â”‚  Server â†’ [JWT Token] â†’ User                  â”‚
â”‚                                               â”‚
â”‚  Step 4: Store                                â”‚
â”‚  User stores token (localStorage)             â”‚
â”‚                                               â”‚
â”‚  Step 5: Every request                        â”‚
â”‚  User â†’ [API call + Token] â†’ Server           â”‚
â”‚                                               â”‚
â”‚  Step 6: Verify token                         â”‚
â”‚  Server decodes & validates token             â”‚
â”‚                                               â”‚
â”‚  Step 7: Process                              â”‚
â”‚  If valid â†’ Process request                   â”‚
â”‚  If invalid â†’ 401 Unauthorized                â”‚
â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**API Keys vs JWT Tokens:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           API Keys                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚  Use for: Service-to-Service                 â”‚
â”‚                                              â”‚
â”‚  Example:                                    â”‚
â”‚  Booking Service â†’ Payment Service           â”‚
â”‚  Authorization: Bearer sk_live_abc123...     â”‚
â”‚                                              â”‚
â”‚  âœ… Simple                                   â”‚
â”‚  âœ… Long-lived                               â”‚
â”‚  âœ… No user context needed                   â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           JWT Tokens                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚  Use for: User Sessions                      â”‚
â”‚                                              â”‚
â”‚  Token contains:                             â”‚
â”‚  {                                           â”‚
â”‚    user_id: "456",                           â”‚
â”‚    role: "customer",                         â”‚
â”‚    exp: 1735689600  (24 hours)               â”‚
â”‚  }                                           â”‚
â”‚                                              â”‚
â”‚  âœ… Stateless (no DB lookup)                â”‚
â”‚  âœ… Self-contained (user info inside)        â”‚
â”‚  âœ… Expirable (auto logout)                  â”‚
â”‚  âœ… Works across services                    â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Authorization (Permission Check)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Authentication vs Authorization           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                               â”‚
â”‚  Authentication: WHO are you?                 â”‚
â”‚  â””â”€> "I am Abhay" (user_id: 456)             â”‚
â”‚                                               â”‚
â”‚  Authorization: What can you DO?              â”‚
â”‚  â””â”€> "Can Abhay cancel booking xyz?"         â”‚
â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Role-Based Access Control (RBAC):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Ticketmaster Roles               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         ADMIN                  â”‚    â”‚
â”‚  â”‚    (Full access)               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚     VENUE_MANAGER              â”‚    â”‚
â”‚  â”‚  (Create events, view sales)   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚       CUSTOMER                 â”‚    â”‚
â”‚  â”‚  (Book & view own bookings)    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Authorization Flow:**

```
Request: DELETE /bookings/xyz123

Step 1: Authentication âœ…
â””â”€> User: Abhay (ID: 456), Role: customer

Step 2: Check booking ownership
â”œâ”€> Fetch booking xyz123
â”œâ”€> booking.user_id = 456
â”œâ”€> request.user_id = 456
â””â”€> Match! âœ…

Step 3: Check booking status
â”œâ”€> booking.status = "active"
â”œâ”€> event.date = future
â””â”€> Cancellable! âœ…

Result: Allow deletion âœ…

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Request: DELETE /bookings/abc789

Step 1: Authentication âœ…
â””â”€> User: Abhay (ID: 456)

Step 2: Check ownership
â”œâ”€> booking.user_id = 789  (Raj's booking!)
â”œâ”€> request.user_id = 456
â””â”€> Mismatch! âŒ

Result: 403 Forbidden
Message: "Not your booking!"
```

### 3. Rate Limiting (Abuse Prevention)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Why Rate Limiting?                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                           â”‚
â”‚  Scenario 1: Ticket Scalper Bot           â”‚
â”‚  â”œâ”€ 1000 bookings in 1 second            â”‚
â”‚  â””â”€> Without limit: All tickets gone! ğŸ˜± â”‚
â”‚                                           â”‚
â”‚  Scenario 2: DDoS Attack                  â”‚
â”‚  â”œâ”€ 100K requests/second                  â”‚
â”‚  â””â”€> Without limit: Server crash! ğŸ’¥     â”‚
â”‚                                           â”‚
â”‚  Scenario 3: Coding Mistake               â”‚
â”‚  â”œâ”€ Infinite loop calling API             â”‚
â”‚  â””â”€> Without limit: Huge bill! ğŸ’¸        â”‚
â”‚                                           â”‚
â”‚  Solution: Rate Limiting âœ…               â”‚
â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Rate Limiting Strategy:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Multi-level Rate Limits            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  Level 1: Per User                       â”‚
â”‚  â””â”€> 1000 requests/hour                  â”‚
â”‚                                          â”‚
â”‚  Level 2: Per IP (Unauthenticated)       â”‚
â”‚  â””â”€> 100 requests/hour                   â”‚
â”‚                                          â”‚
â”‚  Level 3: Per Endpoint                   â”‚
â”‚  â”œâ”€> POST /bookings: 10/minute (strict)  â”‚
â”‚  â”œâ”€> GET /events: 1000/minute (relaxed)  â”‚
â”‚  â””â”€> POST /login: 5/minute (very strict) â”‚
â”‚                                          â”‚
â”‚  Level 4: Global                         â”‚
â”‚  â””â”€> 1M requests/minute (total capacity) â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Rate Limiting Flow:**

```
User makes request
      â”‚
      â–¼
 Check rate limit counter
      â”‚
      â”œâ”€> Count < Limit? â”€â”€â”€â”€â”€> Allow âœ…
      â”‚                         â””â”€> Increment counter
      â”‚                         â””â”€> Process request
      â”‚
      â””â”€> Count >= Limit? â”€â”€â”€â”€> Block âŒ
                                â””â”€> Return 429
                                â””â”€> "Too many requests"
                                â””â”€> "Retry after 60s"
```

**Real Example:**

```
Time: 9:00:00 AM
Request 1: POST /bookings âœ… (1/10)
Request 2: POST /bookings âœ… (2/10)
...
Request 10: POST /bookings âœ… (10/10)

Time: 9:00:55 AM
Request 11: POST /bookings âŒ (11/10 - EXCEEDED!)

Response:
{
  "error": "Too many requests",
  "limit": 10,
  "window": "1 minute",
  "retry_after": 5,
  "current_count": 11
}

Time: 9:01:05 AM
Request 12: POST /bookings âœ… (1/10 - New window!)
```

### Complete Security Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User Books Ticket - Security Flow         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚  Request: POST /bookings                     â”‚
â”‚  Authorization: Bearer eyJhbGc...            â”‚
â”‚  { event_id: "123", tickets: [...] }         â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  1. Authentication          â”‚             â”‚
â”‚  â”‚  â”œâ”€ Decode JWT token        â”‚             â”‚
â”‚  â”‚  â”œâ”€ Verify signature        â”‚             â”‚
â”‚  â”‚  â”œâ”€ Check expiry            â”‚             â”‚
â”‚  â”‚  â””â”€> user_id = "456" âœ…     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  2. Rate Limiting           â”‚             â”‚
â”‚  â”‚  â”œâ”€ Check user's count      â”‚             â”‚
â”‚  â”‚  â”œâ”€ Current: 5/10           â”‚             â”‚
â”‚  â”‚  â””â”€> Within limit âœ…        â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  3. Authorization           â”‚             â”‚
â”‚  â”‚  â”œâ”€ User role: customer     â”‚             â”‚
â”‚  â”‚  â”œâ”€ Can book? Yes âœ…        â”‚             â”‚
â”‚  â”‚  â””â”€> Proceed                â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  4. Business Logic          â”‚             â”‚
â”‚  â”‚  â”œâ”€ Check ticket available  â”‚             â”‚
â”‚  â”‚  â”œâ”€ Calculate price         â”‚             â”‚
â”‚  â”‚  â”œâ”€ Create booking          â”‚             â”‚
â”‚  â”‚  â””â”€> Return booking âœ…      â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Decision Trees

### Main API Selection

```
                    Start
                      â”‚
                      â–¼
              Need API design?
                      â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                     â”‚
           â–¼                     â–¼
    Public facing?       Internal services?
    (Web/Mobile)         (Microservices)
           â”‚                     â”‚
           â–¼                     â–¼
       Use REST              Use gRPC
           â”‚                     â”‚
           â”‚                     â–¼
           â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚              â”‚ Benefits:    â”‚
           â”‚              â”‚ - Fast       â”‚
           â”‚              â”‚ - Type-safe  â”‚
           â”‚              â”‚ - Efficient  â”‚
           â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    Different clients
    need different data?
           â”‚
      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
      â”‚         â”‚
      â–¼         â–¼
     Yes       No
      â”‚         â”‚
      â–¼         â”‚
  GraphQL       â”‚
      â”‚         â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€> REST (Default) âœ…
```

### Pagination Selection

```
                Need pagination?
                      â”‚
                      â–¼
              Data size > 100?
                      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
              â”‚               â”‚
              â–¼               â–¼
            Yes              No
              â”‚               â”‚
              â”‚               â–¼
              â”‚        Return all data
              â”‚        (No pagination)
              â”‚
              â–¼
        Real-time data?
        (Constantly changing)
              â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
      â”‚               â”‚
      â–¼               â–¼
    Yes              No
      â”‚               â”‚
      â–¼               â–¼
  Cursor-based    Need page numbers?
      â”‚               â”‚
      â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
      â”‚       â”‚               â”‚
      â”‚       â–¼               â–¼
      â”‚     Yes              No
      â”‚       â”‚               â”‚
      â”‚       â–¼               â–¼
      â”‚  Offset-based    Cursor-based
      â”‚   (Simple)       (Performance)
      â”‚
      â–¼
  Examples:
  - Twitter feed
  - Chat history
  - Notifications
```

### Security Implementation

```
                 API Endpoint
                      â”‚
                      â–¼
              Public endpoint?
                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                       â”‚
          â–¼                       â–¼
         Yes                     No
          â”‚                       â”‚
          â–¼                       â”‚
    No authentication             â”‚
    (e.g., GET /events)           â”‚
                                  â”‚
                                  â–¼
                         Requires authentication
                                  â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                 â”‚
                         â–¼                 â–¼
                  User session?     Service-to-service?
                         â”‚                 â”‚
                         â–¼                 â–¼
                    Use JWT          Use API Keys
                         â”‚                 â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                         Check authorization
                                  â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                 â”‚
                         â–¼                 â–¼
                  Role-based?    Resource ownership?
                    (RBAC)            â”‚
                         â”‚            â–¼
                         â”‚       Check user_id
                         â”‚       matches resource
                         â”‚            â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                          Apply rate limiting
                                  â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                 â”‚
                         â–¼                 â–¼
                  Critical endpoint?   Regular endpoint?
                  (e.g., /bookings)   (e.g., /events)
                         â”‚                 â”‚
                         â–¼                 â–¼
                    10/minute         1000/minute
```

---

## Quick Reference Cheat Sheet

### REST Status Codes

```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Code â”‚          Meaning               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 200  â”‚ OK (Success)                   â”‚
â”‚ 201  â”‚ Created (Resource created)     â”‚
â”‚ 204  â”‚ No Content (Deleted)           â”‚
â”‚ 400  â”‚ Bad Request (Invalid input)    â”‚
â”‚ 401  â”‚ Unauthorized (Not logged in)   â”‚
â”‚ 403  â”‚ Forbidden (No permission)      â”‚
â”‚ 404  â”‚ Not Found (Resource missing)   â”‚
â”‚ 429  â”‚ Too Many Requests (Rate limit) â”‚
â”‚ 500  â”‚ Server Error (Backend issue)   â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API Comparison Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Feature  â”‚  REST   â”‚ GraphQL  â”‚  gRPC   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Protocol  â”‚ HTTP/1  â”‚ HTTP/1   â”‚ HTTP/2  â”‚
â”‚ Format    â”‚  JSON   â”‚  JSON    â”‚ Binary  â”‚
â”‚ Speed     â”‚ Medium  â”‚ Medium   â”‚  Fast   â”‚
â”‚ Size      â”‚ Large   â”‚ Medium   â”‚  Small  â”‚
â”‚ Learning  â”‚  Easy   â”‚ Medium   â”‚  Hard   â”‚
â”‚ Debugging â”‚  Easy   â”‚ Medium   â”‚  Hard   â”‚
â”‚ Browser   â”‚   âœ…    â”‚   âœ…     â”‚   âŒ    â”‚
â”‚ Streaming â”‚   âŒ    â”‚   âœ…     â”‚   âœ…    â”‚
â”‚ Type Safe â”‚   âŒ    â”‚   âœ…     â”‚   âœ…    â”‚
â”‚ Use Case  â”‚ Public  â”‚ Flexible â”‚Internal â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Common Mistakes to Avoid

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          DON'T Do This!                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚ âŒ Actions in URLs:                        â”‚
â”‚    /bookTicket, /cancelBooking             â”‚
â”‚    âœ… Use: POST /bookings, DELETE /bookingsâ”‚
â”‚                                            â”‚
â”‚ âŒ No pagination on large datasets:        â”‚
â”‚    GET /events â†’ 1M records                â”‚
â”‚    âœ… Use: GET /events?limit=20            â”‚
â”‚                                            â”‚
â”‚ âŒ No rate limiting:                       â”‚
â”‚    Unlimited requests allowed              â”‚
â”‚    âœ… Use: 1000 requests/hour limit        â”‚
â”‚                                            â”‚
â”‚ âŒ No authentication on sensitive APIs:    â”‚
â”‚    Anyone can delete bookings              â”‚
â”‚    âœ… Use: JWT tokens, check ownership     â”‚
â”‚                                            â”‚
â”‚ âŒ Exposing internal errors:               â”‚
â”‚    "SQL error: table users..."             â”‚
â”‚    âœ… Use: "Internal server error"         â”‚
â”‚                                            â”‚
â”‚ âŒ Using offset for real-time feeds:       â”‚
â”‚    Twitter feed with offset pagination     â”‚
â”‚    âœ… Use: Cursor-based pagination         â”‚
â”‚                                            â”‚
â”‚ âŒ No API versioning:                      â”‚
â”‚    Breaking changes affect all users       â”‚
â”‚    âœ… Use: /v1/events, /v2/events          â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Interview Strategy

### Time Allocation (45-60 min interview)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Interview Time Budget            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚ 1. Requirements (5 min)                â”‚
â”‚ 2. API Design (5 min) â—„â”€â”€ This topic  â”‚
â”‚ 3. High-level Design (15 min)         â”‚
â”‚ 4. Deep Dives (20 min)                 â”‚
â”‚ 5. Questions (5 min)                   â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

API Design = 5 minutes max!
Don't over-invest here!
```

### What to Say (Template)

```
"For the API design, I'll use REST APIs because:
1. Standard protocol for web/mobile clients
2. Easy to understand and debug
3. Suitable for our CRUD operations

Main endpoints:
â”œâ”€ GET /events              (List events)
â”œâ”€ POST /bookings           (Create booking)
â”œâ”€ GET /bookings            (User's bookings)
â””â”€ DELETE /bookings/:id     (Cancel booking)

For implementation:
â”œâ”€ Pagination: Cursor-based for feeds, offset for search
â”œâ”€ Versioning: URL-based (/v1/, /v2/)
â”œâ”€ Security: JWT for users, API keys for services
â””â”€ Rate limiting: 10 bookings/minute (prevent scalping)

For internal services, I'd use gRPC for performance.

Should I go deeper into any aspect, or move to high-level design?"
```

### Red Flags in Interview

```
ğŸš© Spending 15+ minutes on API design
   â””â”€> Move faster, more important topics ahead!

ğŸš© Mentioning every HTTP status code
   â””â”€> Just say 2xx/4xx/5xx, move on!

ğŸš© Writing complete API specs
   â””â”€> High-level design is more important!

ğŸš© Debating REST vs GraphQL for 10 minutes
   â””â”€> Pick one quickly, justify briefly!

âœ… Good approach:
   "I'll use REST with pagination and auth.
   Let me move to the system architecture..."
```

### Key Talking Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Must-mention Points                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚ âœ… Protocol choice (REST/GraphQL/gRPC)   â”‚
â”‚ âœ… Main endpoints (3-5 examples)         â”‚
â”‚ âœ… Pagination strategy                   â”‚
â”‚ âœ… Authentication approach               â”‚
â”‚ âœ… Rate limiting (if relevant)           â”‚
â”‚                                          â”‚
â”‚ Optional (if time):                      â”‚
â”‚ â—‹ Versioning                             â”‚
â”‚ â—‹ Error handling                         â”‚
â”‚ â—‹ Status codes                           â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Real-world Example: Ticketmaster API Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Ticketmaster API Design                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  External APIs (REST/JSON):                          â”‚
â”‚  â”œâ”€ GET  /v1/events?city=Mumbai&limit=20             â”‚
â”‚  â”œâ”€ GET  /v1/events/:id                              â”‚
â”‚  â”œâ”€ POST /v1/bookings                                â”‚
â”‚  â”œâ”€ GET  /v1/bookings                                â”‚
â”‚  â””â”€ DELETE /v1/bookings/:id                          â”‚
â”‚                                                      â”‚
â”‚  Internal APIs (gRPC):                               â”‚
â”‚  â”œâ”€ BookingService.CreateBooking()                   â”‚
â”‚  â”œâ”€ PaymentService.ProcessPayment()                  â”‚
â”‚  â”œâ”€ InventoryService.CheckAvailability()             â”‚
â”‚  â””â”€ NotificationService.SendConfirmation()           â”‚
â”‚                                                      â”‚
â”‚  Features:                                           â”‚
â”‚  â”œâ”€ Pagination: Cursor-based for feeds               â”‚
â”‚  â”œâ”€ Auth: JWT tokens for users                       â”‚
â”‚  â”œâ”€ Rate Limiting: 10 bookings/minute                â”‚
â”‚  â”œâ”€ Versioning: URL-based (/v1/, /v2/)               â”‚
â”‚  â””â”€ Security: RBAC (customer, manager, admin)        â”‚
â”‚                                                      â”‚
â”‚  Architecture:                                       â”‚
â”‚  [Mobile] â”€RESTâ”€> [Gateway] â”€gRPCâ”€> [Services]       â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Final Checklist âœ…

```
Before moving to next topic, ensure:

â–¡ Picked protocol (REST/GraphQL/gRPC)
â–¡ Listed main endpoints (3-5 examples)
â–¡ Mentioned pagination if needed
â–¡ Covered authentication/authorization
â–¡ Mentioned rate limiting if relevant
â–¡ Spent < 5 minutes total

Ready to move to high-level design? âœ…
```

---

## Quick Revision - One-liners

```
REST      = Resources (nouns), HTTP methods, JSON
GraphQL   = Single endpoint, client specifies data
gRPC      = Fast, binary, service-to-service

Pagination:
- Offset   = Simple, pages, inconsistent
- Cursor   = Consistent, real-time, no pages

Security:
- Authentication = Who? (JWT/API keys)
- Authorization  = What? (RBAC, ownership)
- Rate Limiting  = How much? (Abuse prevention)

Interview:
- Default = REST
- 5 minutes max
- Move to architecture quickly
```

---

**END OF API DESIGN SUMMARY** ğŸ¯

**Next Topics:**
- High-level System Architecture
- Database Design
- Scalability & Performance
- Deep Dives (Caching, Queuing, etc.)

**Remember:** API design is just 10% of the interview. Master it, but don't over-invest time during the interview!
